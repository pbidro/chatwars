{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/* Vuex Library*/\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport { auth } from '../firebase/config';\nimport { signInWithEmailAndPassword, onAuthStateChanged, createUserWithEmailAndPassword } from 'firebase/auth';\nimport { getFirestore, collection, onSnapshot, query, where, addDoc\n/*,orderByaddDoc,deleteDoc*/\n, doc, setDoc } from 'firebase/firestore';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    myFirestore: null,\n    usuario: '',\n    miData: '',\n    otherUsers: ''\n  },\n  getters: {\n    getPendingMatch: state => () => {\n      var acceptedDocuments = state.miData.data.user.matchUsers.filter(matches => matches.state == \"pending\");\n      var acceptedDocumentsArray = acceptedDocuments.map(element => element.document);\n      var responseObject = state.otherUsers.filter(element => acceptedDocumentsArray.includes(element.documentid));\n      return responseObject;\n    },\n    getRejectedMatch: state => () => {\n      var auxArray = state.miData.data.user.matchUsers.filter(matches => matches.state == \"rejected\");\n      return auxArray;\n    },\n    getAcceptedMatch: state => () => {\n      var acceptedDocuments = state.miData.data.user.matchUsers.filter(matches => matches.state == \"accepted\");\n      var acceptedDocumentsArray = acceptedDocuments.map(element => element.document);\n      var responseObject = state.otherUsers.filter(element => acceptedDocumentsArray.includes(element.documentid));\n      return responseObject;\n    },\n    getConversation: state => mail => {\n      var chatIndex = state.miData.data.user.matchUsers.findIndex(matches => matches.matchUser == mail);\n      console.log(chatIndex + 'chatindex');\n      var responseObject = state.miData.data.user.matchUsers[chatIndex].chat;\n      var document = state.miData.data.user.matchUsers[chatIndex].document;\n\n      if (responseObject == undefined) {\n        responseObject = [];\n      }\n\n      return {\n        chat: responseObject,\n        document: document\n      };\n    },\n    getTargetUser: state => docid => {\n      var auxArray = state.otherUsers.filter(matches => matches.documentid == docid);\n      return auxArray[0];\n    },\n    getNotMatchedUsers: state => interactions => {\n      console.log(state.otherUsers);\n      console.log(interactions);\n      var auxArray = state.otherUsers.filter(element => !interactions.includes(element.documentid));\n      return auxArray;\n    },\n    getAllMatchDocs: state => () => {\n      var auxArray = state.miData.data.user.matchUsers;\n      var result = auxArray.map(element => element.document);\n      console.log(result);\n      return result;\n    }\n  },\n  mutations: {\n    setUser(state, payload) {\n      state.usuario = payload.email;\n      console.log(`user state change ${state.usuario}`);\n    },\n\n    setUserInfo(state, payload) {\n      state.miData = {\n        data: payload.data,\n        documentid: payload.documentid\n      };\n      console.log(`user data loaded ${payload.documentid}`);\n    },\n\n    setOtherUsers(state, payload) {\n      console.log(payload);\n      state.otherUsers = payload;\n      console.log(`other users loaded as:  ${payload}`);\n    },\n\n    instanceFirestore(state, fs) {\n      state.myFirestore = fs;\n    }\n\n  },\n  actions: {\n    async instanceFirestore(context, fs) {\n      console.log('iniciado firestore');\n      context.commit(\"instanceFirestore\", fs());\n    },\n\n    async getCurrentUser(context) {\n      await onAuthStateChanged(auth, user => {\n        if (user) {\n          context.commit('setUser', user);\n        } else {\n          context.commit('setUser', {\n            email: null\n          });\n        }\n      });\n    },\n\n    async signOut(context) {\n      const res = await auth.signOut().then(() => {\n        this.$router.push(\"/home\");\n      });\n\n      if (res) {\n        context.commit('setUser', res.user);\n      }\n    },\n\n    async signIn(context, {\n      email,\n      password\n    }) {\n      const res = await signInWithEmailAndPassword(auth, email, password);\n\n      if (res) {\n        context.commit('setUser', res.user);\n      }\n    },\n\n    async signUp(context, {\n      email,\n      password,\n      newUser\n    }) {\n      const res = await createUserWithEmailAndPassword(auth, email, password);\n\n      if (res) {\n        await addDoc(collection(getFirestore(), \"starchat\"), newUser);\n        context.commit('setUser', res.user);\n      }\n    },\n\n    async getMyData({\n      commit\n    }) {\n      await onAuthStateChanged(auth, user => {\n        if (user) {\n          if (this.state.myFirestore) {\n            const db = getFirestore();\n            console.log(`cargando datos del usuario ${user.email}`);\n            const q = query(collection(db, \"starchat\"), where('user.userMail', '==', user.email));\n            onSnapshot(q, querySnapshot => {\n              var myDataPayload = '';\n              querySnapshot.forEach(doc => {\n                myDataPayload = {\n                  documentid: doc.id,\n                  data: doc.data()\n                };\n              });\n              commit('setUserInfo', myDataPayload);\n            });\n          }\n        }\n      });\n    },\n\n    async getAnotherUsers({\n      commit\n    }) {\n      await onAuthStateChanged(auth, user => {\n        if (user) {\n          if (this.state.myFirestore) {\n            const db = getFirestore();\n            const q = query(collection(db, \"starchat\"), where('user.userMail', '!=', user.email));\n            onSnapshot(q, querySnapshot => {\n              const mensajes = [];\n              this.mensajes = [];\n              querySnapshot.forEach(doc => {\n                mensajes.push({\n                  documentid: doc.id,\n                  data: doc.data()\n                });\n              });\n              commit('setOtherUsers', mensajes);\n            });\n          }\n        } else {\n          commit('setUser', {\n            email: null\n          });\n        }\n      });\n    },\n\n    async sendMatch(commit, objeto) {\n      if (objeto != \"\") {\n        console.log(objeto);\n        const db = getFirestore();\n\n        if (objeto.fromUser.data.user.matchCounter > 0) {\n          objeto.fromUser.data.user.matchCounter -= 1;\n          objeto.toUser.data.user.matchUsers.push({\n            matchUser: objeto.fromUser.data.user.userMail,\n            state: \"pending\",\n            document: objeto.fromUser.documentid\n          });\n          objeto.fromUser.data.user.matchUsers.push({\n            matchUser: objeto.toUser.data.user.userMail,\n            state: \"pending\",\n            document: objeto.toUser.documentid\n          });\n          await setDoc(doc(db, \"starchat\", objeto.fromUser.documentid), objeto.fromUser.data);\n          await setDoc(doc(db, \"starchat\", objeto.toUser.documentid), objeto.toUser.data);\n        }\n\n        commit;\n      }\n    },\n\n    async approveMatch(commit, objeto) {\n      if (objeto != \"\") {\n        const db = getFirestore();\n        var fromIndex = objeto.fromUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.toUser.data.user.userMail);\n        var toIndex = objeto.toUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.fromUser.data.user.userMail);\n        objeto.toUser.data.user.matchUsers[toIndex].state = \"accepted\";\n        objeto.fromUser.data.user.matchUsers[fromIndex].state = \"accepted\";\n        await setDoc(doc(db, \"starchat\", objeto.fromUser.documentid), objeto.fromUser.data);\n        await setDoc(doc(db, \"starchat\", objeto.toUser.documentid), objeto.toUser.data);\n        commit;\n      }\n    },\n\n    async rejectMatch(commit, objeto) {\n      if (objeto != \"\") {\n        const db = getFirestore();\n        var fromIndex = objeto.fromUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.toUser.data.user.userMail);\n        var toIndex = objeto.toUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.fromUser.data.user.userMail);\n        objeto.toUser.data.user.matchUsers[toIndex].state = \"rejected\";\n        objeto.fromUser.data.user.matchUsers[fromIndex].state = \"rejected\";\n        await setDoc(doc(db, \"starchat\", objeto.fromUser.documentid), objeto.fromUser.data);\n        await setDoc(doc(db, \"starchat\", objeto.toUser.documentid), objeto.toUser.data);\n        commit;\n      }\n    },\n\n    async sendMessage(commit, objeto) {\n      if (objeto != \"\") {\n        const db = getFirestore();\n        var fromIndex = this.state.miData.data.user.matchUsers.findIndex(element => element.matchUser == objeto.to);\n        console.log(objeto.target);\n        var toIndex = objeto.target.data.user.matchUsers.findIndex(element => element.matchUser == this.state.usuario);\n\n        if (this.state.miData.data.user.matchUsers[fromIndex].chat == undefined) {\n          this.state.miData.data.user.matchUsers[fromIndex].chat = [];\n          objeto.target.data.user.matchUsers[toIndex].chat = [];\n        }\n\n        var puchObject = {\n          text: objeto.text,\n          from: objeto.from,\n          to: objeto.to,\n          date: objeto.date\n        };\n        this.state.miData.data.user.matchUsers[fromIndex].chat.push(puchObject);\n        objeto.target.data.user.matchUsers[toIndex].chat.push(puchObject);\n        await setDoc(doc(db, \"starchat\", this.state.miData.documentid), this.state.miData.data);\n        await setDoc(doc(db, \"starchat\", objeto.target.documentid), objeto.target.data);\n        commit;\n      }\n    }\n\n  },\n  modules: {}\n});","map":{"version":3,"names":["Vue","Vuex","auth","signInWithEmailAndPassword","onAuthStateChanged","createUserWithEmailAndPassword","getFirestore","collection","onSnapshot","query","where","addDoc","doc","setDoc","use","Store","state","myFirestore","usuario","miData","otherUsers","getters","getPendingMatch","acceptedDocuments","data","user","matchUsers","filter","matches","acceptedDocumentsArray","map","element","document","responseObject","includes","documentid","getRejectedMatch","auxArray","getAcceptedMatch","getConversation","mail","chatIndex","findIndex","matchUser","console","log","chat","undefined","getTargetUser","docid","getNotMatchedUsers","interactions","getAllMatchDocs","result","mutations","setUser","payload","email","setUserInfo","setOtherUsers","instanceFirestore","fs","actions","context","commit","getCurrentUser","signOut","res","then","$router","push","signIn","password","signUp","newUser","getMyData","db","q","querySnapshot","myDataPayload","forEach","id","getAnotherUsers","mensajes","sendMatch","objeto","fromUser","matchCounter","toUser","userMail","approveMatch","fromIndex","toIndex","rejectMatch","sendMessage","to","target","puchObject","text","from","date","modules"],"sources":["/Users/pibustamante/Documents/repositorios/chatwars/chatwars/src/store/index.js"],"sourcesContent":["/* Vuex Library*/\n\nimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport {auth} from '../firebase/config'\nimport {signInWithEmailAndPassword,onAuthStateChanged,createUserWithEmailAndPassword} from 'firebase/auth'\nimport {getFirestore,collection,onSnapshot,query,where,addDoc/*,orderByaddDoc,deleteDoc*/,doc,setDoc} from 'firebase/firestore'\n\nVue.use(Vuex)\nexport default new Vuex.Store({\n  state: {\n    myFirestore: null,\n    usuario: '',\n    miData: '',\n    otherUsers: '',\n  },\n\n  getters: {\n    getPendingMatch: (state) => () => {\n      var acceptedDocuments = state.miData.data.user.matchUsers.filter(matches => matches.state == \"pending\");\n      var acceptedDocumentsArray = acceptedDocuments.map(element => element.document);\n      var responseObject = state.otherUsers.filter(element => acceptedDocumentsArray.includes(element.documentid))\n      return responseObject\n    },\n\n    getRejectedMatch: (state) => () => {\n\n      var auxArray = state.miData.data.user.matchUsers.filter(matches => matches.state == \"rejected\");\n      return auxArray\n    },\n\n    getAcceptedMatch: (state) => () => {\n      var acceptedDocuments = state.miData.data.user.matchUsers.filter(matches => matches.state == \"accepted\");\n      var acceptedDocumentsArray = acceptedDocuments.map(element => element.document);\n      var responseObject = state.otherUsers.filter(element => acceptedDocumentsArray.includes(element.documentid))\n      return responseObject\n    },\n\n    getConversation: (state) => (mail) => {\n      var chatIndex = state.miData.data.user.matchUsers.findIndex(matches => matches.matchUser == mail);\n      console.log(chatIndex+ 'chatindex')\n      var responseObject = state.miData.data.user.matchUsers[chatIndex].chat \n      var document = state.miData.data.user.matchUsers[chatIndex].document\n\n      if(responseObject == undefined){\n        responseObject=[]\n      }\n      return {chat: responseObject, document: document}\n    },\n\n    getTargetUser: (state) => (docid) => {\n      var auxArray = state.otherUsers.filter(matches => matches.documentid == docid);\n      return auxArray[0]\n    },\n\n    getNotMatchedUsers: (state) => (interactions) => {\n      console.log(state.otherUsers)\n      console.log(interactions)\n      var auxArray = state.otherUsers.filter(element => !interactions.includes(element.documentid))\n\n      return auxArray\n    },\n\n    getAllMatchDocs: (state) => () => {\n      var auxArray = state.miData.data.user.matchUsers;\n      var result = auxArray.map(element => element.document);\n      console.log(result);\n      return result\n    },\n  },\n\n  mutations: {\n    setUser(state, payload) {\n      state.usuario = payload.email\n      console.log(`user state change ${state.usuario}`)\n    },\n    setUserInfo(state, payload) {\n      state.miData = {data: payload.data, documentid:payload.documentid}\n      console.log(`user data loaded ${payload.documentid}`)\n    },\n    setOtherUsers(state, payload) {\n      console.log(payload)\n      state.otherUsers = payload\n      console.log(`other users loaded as:  ${payload}`)\n    },\n    instanceFirestore(state, fs) {\n      state.myFirestore = fs\n    },\n    },\n\n  actions: {\n \n    async instanceFirestore(context, fs) {\n      console.log('iniciado firestore')\n      context.commit(\"instanceFirestore\", fs())\n    },\n\n    async getCurrentUser(context){\n     await onAuthStateChanged(auth, (user) => {\n        if (user) {\n          context.commit('setUser', user)\n        } else {\n          context.commit('setUser', {email:null})\n        }\n    })\n    },\n\n    async signOut(context) {\n      const res = await auth.signOut()\n      .then(() => {\n        this.$router.push(\"/home\");\n      });\n      if (res) {\n        context.commit('setUser', res.user)\n      }\n    },\n\n    async signIn(context, { email, password }) {\n      const res = await signInWithEmailAndPassword(auth, email, password)\n      if (res) {\n        context.commit('setUser', res.user)\n      }\n    },\n\n    async signUp(context, { email, password, newUser }) {\n      const res = await createUserWithEmailAndPassword(auth, email, password)\n\n      if (res) {\n        \n        await addDoc(collection(getFirestore(), \"starchat\"), newUser);\n        context.commit('setUser', res.user)\n\n      }\n   \n\n    },\n\n\n\n    async getMyData({commit}) {\n\n     await onAuthStateChanged(auth, (user) => {\n        if (user) {\n\n          if (this.state.myFirestore) {\n            const db = getFirestore();\n            console.log(`cargando datos del usuario ${user.email}`)\n           const q =  query(collection(db, \"starchat\"),where('user.userMail','==',user.email));  \n            onSnapshot(q, (querySnapshot) => {\n              var myDataPayload = '';\n              querySnapshot.forEach((doc) => {\n                myDataPayload = {documentid: doc.id, data: doc.data()}\n              });\n              commit('setUserInfo', myDataPayload)\n            });\n          }\n\n        } \n    })\n    },\n\n    async getAnotherUsers({commit}) {\n\n      await onAuthStateChanged(auth, (user) => {\n         if (user) {\n \n          if (this.state.myFirestore) {\n            const db = getFirestore();\n           const q = query(collection(db, \"starchat\"),where('user.userMail','!=',user.email)) ;  \n            onSnapshot(q, (querySnapshot) => {\n              const mensajes = [];\n              this.mensajes = [];\n              querySnapshot.forEach((doc) => {\n                mensajes.push({ documentid:doc.id,data: doc.data()});\n              });\n              commit('setOtherUsers', mensajes)\n            });\n          }\n \n         } else {\n           commit('setUser', {email:null})\n         }\n     })\n    },\n\n     async sendMatch(commit, objeto) {\n      if (objeto != \"\") {\n        console.log(objeto)\n        const db = getFirestore();\n        if(objeto.fromUser.data.user.matchCounter >0){\n\n          objeto.fromUser.data.user.matchCounter -= 1;\n          objeto.toUser.data.user.matchUsers.push({matchUser: objeto.fromUser.data.user.userMail, state:\"pending\", document:objeto.fromUser.documentid})\n          objeto.fromUser.data.user.matchUsers.push({matchUser: objeto.toUser.data.user.userMail, state:\"pending\", document:objeto.toUser.documentid})\n        await setDoc(doc(db, \"starchat\", objeto.fromUser.documentid), objeto.fromUser.data);\n        await setDoc(doc(db, \"starchat\", objeto.toUser.documentid), objeto.toUser.data);\n\n        }\n\n        commit\n      }\n    },\n\n    async approveMatch(commit, objeto) {\n      if (objeto != \"\") {\n        const db = getFirestore();\n        var fromIndex = objeto.fromUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.toUser.data.user.userMail)\n        var toIndex = objeto.toUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.fromUser.data.user.userMail)\n\n        objeto.toUser.data.user.matchUsers[toIndex].state = \"accepted\"\n        objeto.fromUser.data.user.matchUsers[fromIndex].state = \"accepted\"\n        \n        await setDoc(doc(db, \"starchat\", objeto.fromUser.documentid), objeto.fromUser.data);\n        await setDoc(doc(db, \"starchat\", objeto.toUser.documentid), objeto.toUser.data);\n\n        \n\n        commit\n      }\n    },\n\n\n    async rejectMatch(commit, objeto) {\n      if (objeto != \"\") {\n        const db = getFirestore();\n        var fromIndex = objeto.fromUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.toUser.data.user.userMail)\n        var toIndex = objeto.toUser.data.user.matchUsers.findIndex(element => element.matchUser == objeto.fromUser.data.user.userMail)\n\n        objeto.toUser.data.user.matchUsers[toIndex].state = \"rejected\"\n        objeto.fromUser.data.user.matchUsers[fromIndex].state = \"rejected\"\n        \n        await setDoc(doc(db, \"starchat\", objeto.fromUser.documentid), objeto.fromUser.data);\n        await setDoc(doc(db, \"starchat\", objeto.toUser.documentid), objeto.toUser.data);\n\n        \n\n        commit\n      }\n    },\n\n\n    async sendMessage(commit, objeto) {\n      if (objeto != \"\") {\n        const db = getFirestore();\n\n        var fromIndex = this.state.miData.data.user.matchUsers.findIndex(element => element.matchUser == objeto.to)\n        console.log(objeto.target)\n        var toIndex = objeto.target.data.user.matchUsers.findIndex(element => element.matchUser == this.state.usuario)\n\n        if(this.state.miData.data.user.matchUsers[fromIndex].chat == undefined){\n          this.state.miData.data.user.matchUsers[fromIndex].chat = []\n          objeto.target.data.user.matchUsers[toIndex].chat =[]\n        }\n        var puchObject = {text: objeto.text ,from: objeto.from, to: objeto.to, date: objeto.date}\n\n        this.state.miData.data.user.matchUsers[fromIndex].chat.push(puchObject)\n        objeto.target.data.user.matchUsers[toIndex].chat.push(puchObject)\n\n        await setDoc(doc(db, \"starchat\", this.state.miData.documentid), this.state.miData.data);\n        await setDoc(doc(db, \"starchat\", objeto.target.documentid), objeto.target.data);\n\n        commit\n      }\n    },\n    \n\n  },\n  modules: {\n  }\n}\n  )\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}